<!DOCTYPE html>
<html>

<head>
    <title>wiki</title>
    <style>
        body{
            width:500px;
        }
    </style>
</head>

<body>
    <label for="search">Question</label>
    <input type="text" id="search">
    <button onclick="getmean()">result</button>
    <p id="p"></p>
</body>
<script>
    var openApiURL = 'http://aiopen.etri.re.kr:8000/WikiQA';
    var access_key = '142d3560-26b9-4166-913f-e11c113da9e2';
    var search = document.querySelector("#search");
    var text = document.getElementById("p");
    var type = 'ENGINE_TYPE';
    function getmean() {
        if (search.value.trim() != '') {
            var requestJson = {
                'access_key': access_key,
                'argument': {
                    'question': search.value,
                    'type': 'irqa'
                }
            };
            var options = {
                url: openApiURL,
                method: 'POST',
                body: JSON.stringify(requestJson),
                headers: { 'Content-Type': 'application/json; charset=UTF-8' }
            };
            fetch(openApiURL, options)
                .then(response => response.json())
                .then(result => {
                    if (result.result === 0) {
                        try{
                            var explain = "";
                        for(var i = 0; i<result.return_object.WiKiInfo.AnswerInfo.length; i++){
                            explain = explain+(i+1)+':'+JSON.stringify(result.return_object.WiKiInfo.AnswerInfo[i].answer)+'\n'
                        }
                        alert(explain);
                        text.innerHTML = `Question:${search.value} <br>
                        Answer: <br>
                        ${explain}`;
                        console.log(result);
                    }catch(error){alert("잘못된 입력이에용");
                        console.log(result);}
                    }

                    else {
                        alert("잘못된 입력이에용");
                        console.log(result);
                    }

                });
        }
    }
</script>


</html>